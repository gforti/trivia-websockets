<!DOCTYPE html>
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel='stylesheet' href='bulma.css' />
        <link rel='stylesheet' href='font.css' />
        <link rel='stylesheet' href='host.css' />
        <style>
           .level {
                font-weight: bold;
                background-image: linear-gradient(141deg, #ff0561 0%, #ff3860 71%, #ff5257 100%);
                margin: 0 !important;
                padding: 1rem;
            }

              

.txt {
  color: #fff;
  font-family: "Oleo Script", sans-serif;
  width: 100%;
  height: 10vw;
  overflow: hidden;
  position: relative;
  text-shadow: 0.5vw 0.5vw 0px #000;
}

.txt p {
  font-size: 7.2vw;
  line-height: 10vw;
  position: absolute;
  margin: 0;
  text-align: center;
  width: 100%;
  transform: translateY(10vw);
  animation: slideUp 4s 0s linear infinite;
}
.txt p.reset-anim {
  animation: none;
}
.txt p:nth-of-type(1) {
  animation-delay: 0s;
}
.txt p:nth-of-type(2) {
  animation-delay: 2s;
}

@keyframes slideUp {
  from {
    transform: translateY(100%);
  }
  25%, 50% {
    transform: translateY(0);
  }
  75%, to {
    transform: translateY(-100%);
  }
}


.question img {
    height: 50vh;
    object-fit: contain;
}
                
        </style>
    </head>
    <body>
             
        <div class="main-wrapper">
          <div class="tree-container">
            <div class="star"></div>
            <div class="spiral-container">
              <ul class="spiral one">
                <li class="light-wrapper light-wrapper-1">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-2">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-3">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-4">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-5">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-6">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-7">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-8">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-9">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-10">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-11">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-12">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-13">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-14">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-15">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-16">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-17">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-18">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-19">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-20">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-21">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-22">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-23">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-24">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-25">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-26">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-27">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-28">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-29">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-30">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-31">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-32">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-33">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-34">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-35">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-36">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-37">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-38">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-39">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-40">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-41">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-42">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-43">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
              </ul>
              <ul class="spiral two">
                <li class="light-wrapper light-wrapper-1">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-2">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-3">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-4">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-5">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-6">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-7">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-8">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-9">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-10">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-11">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-12">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-13">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-14">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-15">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-16">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-17">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-18">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-19">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-20">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-21">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-22">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-23">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-24">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-25">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-26">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-27">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-28">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-29">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-30">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-31">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-32">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-33">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-34">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-35">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-36">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-37">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-38">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-39">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-40">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-41">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-42">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-43">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
              </ul>
              <ul class="spiral three">
                <li class="light-wrapper light-wrapper-1">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-2">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-3">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-4">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-5">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-6">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-7">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-8">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-9">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-10">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-11">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-12">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-13">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-14">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-15">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-16">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-17">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-18">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-19">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-20">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-21">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-22">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-23">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-24">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-25">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-26">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-27">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-28">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-29">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-30">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-31">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-32">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-33">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-34">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-35">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-36">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-37">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-38">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-39">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-40">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-41">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-42">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
                <li class="light-wrapper light-wrapper-43">
                  <div class="stabilise">
                    <div class="light"></div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
          <div class="text-container">
            <h2 class="happy is-large">Epic Christmas Trivia</h2>
            <div class="columns">
                <div class="column">
                    <button class="roundtest button is-light is-large">Start</button>
                </div><div class="column">
                    <button class="round1 button is-link is-large">Round 1</button>
                </div><div class="column">
                    <button class="round2 button is-success is-large">Round 2</button>
                </div>
            </div>
          </div>
        </div>

         <div class="where"><h1></h1></div>
         <div class="players"></div>
         
        <section class="hero is-success is-fullheight is-hidden">
            <div class="hero-head">
            <nav class="level is-mobile">  
                 <div class="level-item has-text-centered">
                    <div>
                        <p class="heading">Location</p>
                        <p class="title where2"></p>
                    </div>
                </div>
                <div class="level-item has-text-centered leader"></div>               
                <div class="level-item has-text-centered points"></div>
                <div class="level-item has-text-centered">
                    <div>
                        <p class="heading">Question</p>
                        <p class="title remain">?</p>
                    </div>
                </div>
            </nav>
            
           
                
                
            <div class="section game-start has-text-centered">
                    <progress class="progress is-large is-info" value="100" max="100"></progress>

                    <div class="question">

                    </div>

                </div>
                
             </div>          
        </section>
        
        
        <script src="/socket.io/socket.io.js"></script>
        
        <script>
                       
            var socket = io();
            let connected = false;
            
             let progress = document.querySelector('progress')
             
            window.addEventListener('load', ()=> {
                socket.emit('host');
                document.querySelector('.main-wrapper').style.opacity = 1                
            })
            
             document.querySelector('.roundtest').addEventListener('click', ()=>{
                socket.emit('start', {round: 0});
                gameStarting()  
            })
            
            document.querySelector('.round1').addEventListener('click', ()=>{
                socket.emit('start', {round: 1});
                gameStarting()  
            })
            
            document.querySelector('.round2').addEventListener('click', ()=>{
                socket.emit('start', {round: 2});
                gameStarting()  
            })
            
            function gameStarting() {
                document.querySelector('.main-wrapper').classList.add('is-hidden')               
                document.querySelector('.where').classList.add('is-hidden')               
                document.querySelector('.players').classList.add('is-hidden')               
                document.querySelector('section.hero').classList.remove('is-hidden')
            }
            
                     
            
            socket.on('winner', function(data){
                stopTrack();
                winnerTrack.play()
                displayWinner(data)
            })
           
             function displayWinner(data) {
                 document.querySelector('.game-start').innerHTML = `
                 <p class="has-text-centered"><img src="${data && data.icon ? data.icon : 'icons/1.png'}" /></p>
                 <div class="txt">
                    <p>Winner</p>
                    <p>${data && data.username ? data.username : 'unknown'}</p>
                </div>   
                `
             }
                 
            
            
            socket.on('host-game-info', function (data) {
              connected = true;
              
              document.querySelector('.where h1').innerHTML = data.gameUrl
              document.querySelector('.where2').innerHTML = data.gameUrl
              updateUsers(data)  
             
             
            });
            
            socket.on('user joined', function (data) {
                updateUsers(data)                
            });
            
            function updateUsers(data){
               document.querySelector('.players').innerHTML = ` <div>
                            <p class="heading">Players</p>
                            <p class="title">${data.numUsers}</p>
                        </div>` 
            }
            
            socket.on('correct answer', function (data) {
              
              
                progress.value = 100;
                updateProgressBar(data)
                displayAnswer(data)
                updateQuestionsLeft(data)
              
            });
            
            function updateQuestionsLeft(data){
                document.querySelector('.remain').innerHTML = data.questionsLeft
                
            }
            
            
             socket.on('question', function (data) {             
               
                progress.value = 100;
                updateProgressBar(data)
                displayQuestion(data)
                
            });
            
             socket.on('leader', function (data) {  
                displayLeader(data) 
                updatePoints(data)
            });
            
            
            function displayQuestion(data){
                let html = `<h1 class="title is-1">${data.question}</h1>`
                if ( data.img )
                    html += `<p class="has-text-centered"><img src="img/${data.img}" /></p>`        
                document.querySelector('.question').innerHTML = html
            }
            
            function displayAnswer(data){
                document.querySelector('.question').innerHTML = `<h1 class="title is-1">${data.correctAnswer}</h1>`
            }
            
            function displayLeader(data){
                document.querySelector('.leader').innerHTML = `
                        <div>
                            <p class="heading">Leading<br />${data && data.username ? data.username : 'unknown'}</p>
                            <p class="title"><img src="${data && data.icon ? data.icon : 'icons/1.png' }" class="image is-48x48" /> </p>
                        </div> `;
            }
            
            function updatePoints(data) { 
                    document.querySelector('.points').innerHTML = `
                        <div>
                            <p class="heading">Answered</p>
                            <p class="title">${data && data.points ? data.points : 0}</p>
                        </div> `;
            }
            
            
            
            
            function updateProgressBar(data){
                
                let now = new Date().getTime();
                var pct = Math.floor(100 * (data.endTime - now) / data.totalTime);
                if (pct < 2 || isNaN(pct)) {
                    pct = 0;
                }
                progress.value = pct;                
                if (pct < 20) {
                    progress.classList.remove('is-info')
                    progress.classList.add('is-danger');

                } 
                if (pct < 1) {
                    // if 0 or negative, no need to update again.
                    progress.classList.remove('is-danger')
                    progress.classList.add('is-info');
                    return;
                }
                
            
                setTimeout(updateProgressBar.bind(this, data), 100);
                
            }
            
            
            
        var winnerTrack = new Audio(`tracks/winner.mp3`)
         var tracks = [];
         for (let i = 1; i < 7; i++)
         tracks.push(new Audio(`tracks/epic${i}.mp3`));
         
         tracks.sort(function() {return 0.5 - Math.random()});
         
         var currentTrack = 0;
         var allTracks = x = tracks.length;
         
         while (x--) {
             tracks[x].addEventListener('ended',playNextTrack);
         }
         
         
         function stopTrack(){
             tracks[currentTrack].pause();
         }
         
         function playTrack(){
             tracks[currentTrack].play();
         }
         
         function playNextTrack() {
              currentTrack = (currentTrack + 1) % allTracks;
              playTrack();
         }
         
         
         window.addEventListener('DOMContentLoaded', playTrack);
         
         
            
        </script>
    </body>
</html>
